{
  "$schema": "../../packages/config/jeju-manifest.schema.json",
  "name": "factory",
  "displayName": "Factory",
  "version": "1.0.0",
  "description": "Developer coordination hub - bounties, jobs, git, packages, containers, models, project management",
  "type": "app",
  "maintainer": "jeju-network",
  "repository": "https://github.com/jejunetwork/jeju",
  "commands": {
    "dev": "bun run dev",
    "build": "bun run build",
    "start": "bun run start",
    "test": "bun run test:e2e",
    "deploy": "bun run scripts/deploy-cdn.ts"
  },
  "ports": {
    "main": 4009
  },
  "dependencies": ["contracts", "dws", "messaging", "indexer", "crucible", "autocrat"],
  "optional": false,
  "enabled": true,
  "autoStart": true,
  "tags": [
    "factory",
    "bounties",
    "jobs",
    "git",
    "packages",
    "containers",
    "models",
    "projects",
    "collaboration",
    "agents",
    "decentralized"
  ],
  "jns": {
    "name": "factory.jeju",
    "description": "Developer coordination and collaboration hub",
    "url": "https://factory.jejunetwork.org"
  },
  "healthCheck": {
    "url": "http://localhost:4009/api/health",
    "interval": 30000
  },
  "agent": {
    "enabled": true,
    "a2aEndpoint": "/api/a2a",
    "mcpEndpoint": "/api/mcp",
    "tags": ["jeju-app", "factory", "bounties", "jobs", "collaboration"],
    "metadata": {
      "category": "developer-tools",
      "provider": "jeju-network",
      "features": [
        "bounties",
        "jobs",
        "git",
        "packages",
        "containers",
        "models",
        "projects",
        "collaboration",
        "agent-hiring",
        "guardian-validation"
      ]
    },
    "trustModels": ["open", "staked"],
    "x402Support": true,
    "multiTokenPayments": true,
    "jnsName": "factory.jeju"
  },
  "dws": {
    "backend": {
      "enabled": true,
      "runtime": "bun",
      "entrypoint": "src/server.ts",
      "memory": 512,
      "timeout": 30000,
      "minInstances": 1,
      "maxInstances": 10,
      "teeRequired": false,
      "regions": ["global"]
    },
    "cdn": {
      "enabled": true,
      "regions": ["global"],
      "staticDir": "dist/client",
      "cacheRules": [
        { "pattern": "/assets/**", "ttl": 31536000, "immutable": true },
        { "pattern": "/*.js", "ttl": 86400 },
        { "pattern": "/*.css", "ttl": 86400 },
        { "pattern": "/**/*.html", "ttl": 60, "staleWhileRevalidate": 3600 }
      ]
    }
  },
  "contracts": {
    "BountyRegistry": "0x0000000000000000000000000000000000000000",
    "GuardianRegistry": "0x0000000000000000000000000000000000000000",
    "ContainerRegistry": "0x0000000000000000000000000000000000000000",
    "ModelRegistry": "0x0000000000000000000000000000000000000000",
    "ProjectBoard": "0x0000000000000000000000000000000000000000",
    "IdentityRegistry": "0x0000000000000000000000000000000000000000",
    "ReputationRegistry": "0x0000000000000000000000000000000000000000",
    "RepoRegistry": "0x0000000000000000000000000000000000000000",
    "PackageRegistry": "0x0000000000000000000000000000000000000000",
    "ModerationMarketplace": "0x0000000000000000000000000000000000000000"
  },
  "capabilities": {
    "bounties": true,
    "jobs": true,
    "git": true,
    "packages": true,
    "containers": true,
    "models": true,
    "projects": true,
    "feed": true,
    "messaging": true,
    "agentCollaboration": true,
    "guardianValidation": true,
    "aiGovernance": true
  },
  "integrations": {
    "crucible": {
      "enabled": true,
      "features": ["agent-hiring", "pr-review", "bounty-validation", "code-audit"]
    },
    "autocrat": {
      "enabled": true,
      "features": ["governance-proposals", "ceo-feedback", "reputation", "disputes"]
    },
    "farcaster": {
      "enabled": true,
      "channel": "factory",
      "features": ["feed", "comments", "messaging"]
    },
    "dws": {
      "enabled": true,
      "features": ["git", "packages", "containers", "compute", "storage", "cdn", "ci"]
    },
    "kms": {
      "enabled": true,
      "provider": "mpc",
      "features": ["secret-management", "threshold-signing"]
    }
  },
  "decentralization": {
    "level": "full",
    "frontend": {
      "hosting": "ipfs",
      "gateway": "jns",
      "caching": "dws-cdn",
      "buildOutput": "dist",
      "staticExport": true
    },
    "backend": {
      "compute": "dws-compute",
      "storage": "ipfs",
      "database": "covenantSQL"
    },
    "nodeDiscovery": {
      "method": "on-chain",
      "registry": "IdentityRegistry",
      "tag": "dws",
      "fallbackUrl": "http://localhost:4030"
    },
    "authentication": {
      "method": "wallet-signature",
      "header": "x-jeju-signature"
    },
    "secrets": {
      "provider": "mpc-kms",
      "threshold": 2,
      "totalParties": 3
    },
    "cdn": {
      "enabled": true,
      "regions": ["global"],
      "cacheRules": [
        { "pattern": "/assets/**", "ttl": 31536000, "immutable": true },
        { "pattern": "/images/**", "ttl": 86400 },
        { "pattern": "/api/**", "ttl": 0 }
      ],
      "invalidateOnDeploy": true
    },
    "robustness": {
      "multiOrigin": true,
      "automaticFailover": true,
      "p2pFallback": true,
      "contentAddressed": true
    }
  },
  "env": {
    "required": [
      "CHAIN_ID",
      "RPC_URL"
    ],
    "optional": [
      "DWS_URL",
      "IDENTITY_REGISTRY_ADDRESS",
      "CRUCIBLE_URL",
      "AUTOCRAT_URL",
      "KMS_ENDPOINT",
      "MESSAGING_URL",
      "NEYNAR_API_KEY",
      "FARCASTER_CHANNEL_ID"
    ]
  }
}
