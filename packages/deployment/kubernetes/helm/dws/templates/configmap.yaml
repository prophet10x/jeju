apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "dws.fullname" . }}-config
  labels:
    {{- include "dws.labels" . | nindent 4 }}
data:
  config.json: |
    {
      "network": {{ .Values.config.network | quote }},
      "chainId": {{ .Values.config.chainId }},
      "rpcUrl": {{ .Values.config.rpcUrl | quote }},
      "contracts": {
        "identityRegistry": {{ .Values.config.contracts.identityRegistry | quote }},
        "repoRegistry": {{ .Values.config.contracts.repoRegistry | quote }},
        "packageRegistry": {{ .Values.config.contracts.packageRegistry | quote }},
        "containerRegistry": {{ .Values.config.contracts.containerRegistry | quote }},
        "modelRegistry": {{ .Values.config.contracts.modelRegistry | quote }},
        "jnsRegistry": {{ .Values.config.contracts.jnsRegistry | quote }},
        "storageManager": {{ .Values.config.contracts.storageManager | quote }}
      },
      "storage": {
        "primary": {{ .Values.config.storage.primary | quote }},
        "permanent": {{ .Values.config.storage.permanent }},
        "backends": {{ .Values.config.storage.backends | toJson }}
      },
      "cdn": {
        "enabled": {{ .Values.config.cdn.enabled }},
        "edgeNodes": {{ .Values.config.cdn.edgeNodes }}
      },
      "p2p": {
        "enabled": {{ .Values.config.p2p.enabled }},
        "port": {{ .Values.config.p2p.port }}
      },
      "rateLimit": {
        "enabled": {{ .Values.config.rateLimit.enabled }},
        "requestsPerMinute": {{ .Values.config.rateLimit.requestsPerMinute }}
      }
    }


